<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>cvtracker: An object tracking plugin for GStreamer - Vivek's blog</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=icon href=https://123vivekr.github.io/favicon.png>
<link rel=stylesheet href=/css/style.min.c58e6a651aa0b48ec07b5c7421f11de5a8e3f12c2933fcb900a3ac68d971e7f9.css>
<meta property="og:title" content="cvtracker: An object tracking plugin for GStreamer">
<meta property="og:type" content="website">
<meta property="og:url" content="https://123vivekr.github.io/posts/2020-07-28-gstreamer-cvtracker/">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@theroyalkonkani">
<meta name=twitter:creator content="@theroyalkonkani">
<link rel=preconnect href=https://fonts.gstatic.com>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet>
</head>
<body class="page frame page-blog-single">
<div id=wrapper class=wrapper>
<div class=header>
<a class=header-logo href=https://123vivekr.github.io/>Vivek's blog</a>
<div class=menu-main>
<ul>
<li class=menu-item-about>
<a href=/pages/about/>About</a>
</li>
<li class=menu-item-blog>
<a href=/posts/>Blog</a>
</li>
</ul>
</div>
</div>
<div class=blog>
<div class=intro>
<h1>cvtracker: An object tracking plugin for GStreamer<span class=dot>.</span></h1>
</div>
<div class=content>
<p>I’ve been selected as a student developer at Pitivi for Google Summer of Code 2020.
My project is to create an object tracking and blurring feature.</p>
<p>The tracking is done by passing the video clip through a pipeline which includes a tracker plugin.
So, the first goal of the project was to implement the tracker plugin in GStreamer.</p>
<h2 id=introducing-cvtracker>Introducing cvtracker</h2>
<p>This is a GStreamer plugin which allows the user to select an object in the initial frame of a clip by specifying the object’s bounding box (x, y, width and height coordinates). The element then tracks the object during the subsequent frames of the clip.</p>
<p>This plugin is in the <a href=https://gstreamer.freedesktop.org/modules/gst-plugins-bad.html>gst-plugins-bad</a> module. It is currently a <a href=https://gitlab.freedesktop.org/gstreamer/gst-plugins-bad/-/merge_requests/1321>merge request</a>.</p>
<p>The plugin can be used by anyone by just installing the module. An example pipeline is given below.</p>
<h2 id=example>Example</h2>
<p>A sample pipeline with cvtracker looks like this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>gst-launch-1.0 filesrc <span style=color:#8be9fd;font-style:italic>location</span><span style=color:#ff79c6>=</span>t.mp4 ! decodebin ! videoconvert ! cvtracker object-initial-x<span style=color:#ff79c6>=</span><span style=color:#bd93f9>175</span> object-initial-y<span style=color:#ff79c6>=</span>40object-initial-width<span style=color:#ff79c6>=</span><span style=color:#bd93f9>300</span> object-initial-height<span style=color:#ff79c6>=</span><span style=color:#bd93f9>150</span> <span style=color:#8be9fd;font-style:italic>algorithm</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span> ! videoconvert ! xvimagesink</code></pre></div>
<p>Here’s a demo of the pipeline given above: <a href=https://youtu.be/K99qTfsvHnc>YouTube</a></p>
<h2 id=algorithm>Algorithm</h2>
<p>The tracker incorporates <a href=https://docs.opencv.org/3.4/d0/d0a/classcv_1_1Tracker.html>OpenCV’s long term tracker cv::Tracker</a>.</p>
<p>The available tracking algorithms are:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>Boosting         - the Boosting tracker
CSRT             - the CSRT tracker
KCF              - the KCF (Kernelized Correlation Filter) tracker
MedianFlow       - the Median Flow tracker
MIL              - the MIL tracker
MOSSE            - the MOSSE (Minimum Output Sum of Squared Error) tracker
TLD              - the TLD (Tracking, learning and detection) tracker</code></pre></div>
<p>You might wonder why we missed the GOTURN algorithm. It was skipped due to the added complexity of setting up the models by the user.</p>
<h2 id=properties>Properties</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text>algorithm                   - the tracking algorithm to use
draw-rect                   - to draw a rectangle around the tracked object
object-initial-x            - object’s initial x coordinate
object-initial-x            - object’s initial y coordinate
object-initial-height       - object’s initial height
object-initial-width        - object’s initial width</code></pre></div>
<p>The element sends out the tracked object’s bounding box’s x, y, width and height coordinates through the pipeline bus and also through the buffer. If you want live tracking during the playback, you could use the <code>draw-rect</code> property.</p>
</div>
</div>
<div class=footer>
<div class=footer-social>
<span class="social-icon social-icon-twitter">
<a href=https://twitter.com/theroyalkonkani title=twitter target=_blank rel=noopener>
<img src=/images/social/twitter.svg width=24 height=24 alt=twitter>
</a>
</span>
<span class="social-icon social-icon-github">
<a href=https://github.com/123vivekr title=github target=_blank rel=noopener>
<img src=/images/social/github.svg width=24 height=24 alt=github>
</a>
</span>
<span class="social-icon social-icon-linkedin">
<a href=https://www.linkedin.com/in/123vivekr/ title=linkedin target=_blank rel=noopener>
<img src=/images/social/linkedin.svg width=24 height=24 alt=linkedin>
</a>
</span>
</div>
</div>
</div>
<script type=text/javascript src=/js/bundle.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js></script>
</body>
</html>